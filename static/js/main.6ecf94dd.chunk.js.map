{"version":3,"sources":["logo.svg","utils.js","hooks/useIframeMessage.js","components/VirtualConsole.js","hooks/useLocalStorage.js","components/BrowserArea.js","hooks/useIframeInject.js","components/DocumentArea.js","components/MyTextArea.js","components/EditorArea.js","components/Sandbox.js","hooks/useQuestion.js","components/Logo.js","components/Banner.js","components/Comment.js","App.js","hooks/useQuestionList.js","hooks/useQuestionNumber.js","reportWebVitals.js","index.js"],"names":["cacheKey","questionNumber","getQuestionNumberFromHash","hash","match","slice","useIframeMessage","useState","messageList","setMessageList","useEffect","window","sendMessage","args","concat","undefined","VirtualConsole","key","initialValue","item","localStorage","getItem","JSON","parse","error","console","log","storedValue","setStoredValue","value","valueToStore","Function","setItem","stringify","useLocalStorage","isOpen","setIsOpen","scrollRef","useRef","current","scrollTop","scrollHeight","className","length","onClick","o","icon","faAngleDown","faAngleUp","hidden","ref","map","m","data","content","id","BrowserArea","html","css","javascript","injectString","setInjectString","fetch","then","r","text","useIframeInject","tmpl","srcDoc","DocumentArea","markdown","MyTextArea","forcedContent","onChange","otherProps","setValue","debouncedEventFiring","useCallback","func","wait","immediate","timeout","context","this","arguments","later","apply","callNow","clearTimeout","setTimeout","debounce","event","val","target","EditorArea","onHtmlChange","onCssChange","onJavascriptChange","placeholder","Sandbox","editorState","setEditorState","questionObject","setHtml","setCss","setJavascript","setQuestionObject","mdPromise","htmlPromise","cssPromise","jsPromise","Promise","all","md","useQuestion","saveDraft","state","setQuestionCache","questionCache","objString","getQuestionCache","old","newState","Object","assign","Logo","title","Banner","children","Comment","config","clientID","clientSecret","repo","owner","admin","location","href","distractionFreeMode","Gitalk","render","App","questionList","setQuestionList","json","list","useQuestionList","setQuestionNumber","onHashChange","num","addEventListener","removeEventListener","useQuestionNumber","selected","setSelected","showComment","setShowComment","q","e","stopPropagation","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"iKAAe,I,YCgBf,SAASA,EAASC,GAChB,MAAM,kBAAN,OAAyBA,GAsBpB,SAASC,EAA0BC,GACxC,OAAIA,EAAKC,MAAM,cACLD,EAAKE,MAAM,GAEZ,ECxCI,SAASC,IACtB,MAAsCC,mBAAS,IAA/C,mBAAOC,EAAP,KAAoBC,EAApB,KAWA,OATAC,qBAAU,WAIR,OAHAC,OAAOC,YAAc,SAACC,GACpBJ,GAAe,SAACD,GAAD,OAAiBA,EAAYM,OAAO,CAACD,QAE/C,WACLF,OAAOC,iBAAcG,KAEtB,IAEIP,E,+BCTM,SAASQ,IACtB,MCJa,SAAyBC,EAAKC,GAG3C,MAAsCX,oBAAS,WAC7C,IAEE,IAAMY,EAAOR,OAAOS,aAAaC,QAAQJ,GAEzC,OAAOE,EAAOG,KAAKC,MAAMJ,GAAQD,EACjC,MAAOM,GAGP,OADAC,QAAQC,IAAIF,GACLN,MATX,mBAAOS,EAAP,KAAoBC,EAApB,KA4BA,MAAO,CAACD,EAdS,SAACE,GAChB,IAEE,IAAMC,EACJD,aAAiBE,SAAWF,EAAMF,GAAeE,EAEnDD,EAAeE,GAEfnB,OAAOS,aAAaY,QAAQf,EAAKK,KAAKW,UAAUH,IAChD,MAAON,GAEPC,QAAQC,IAAIF,MDxBYU,CAAgB,2BAA2B,GAAvE,mBAAOC,EAAP,KAAeC,EAAf,KACM5B,EAAcF,IACd+B,EAAYC,mBAQlB,OANA5B,qBAAU,WACJ2B,EAAUE,UACZF,EAAUE,QAAQC,UAAYH,EAAUE,QAAQE,gBAEjD,CAACjC,IAGF,sBAAKkC,UAAU,oCAAf,UACE,sBAAKA,UAAU,6EAAf,UACE,sBAAKA,UAAU,gBAAf,sBAAyClC,EAAYmC,OAArD,OACA,qBACED,UAAU,uDACVE,QAAS,WACPR,GAAU,SAACS,GAAD,OAAQA,MAHtB,SAME,cAAC,IAAD,CACEC,KAAMX,EAASY,IAAcC,WAInC,qBACEN,UAAU,kCACVO,QAASd,EACTe,IAAKb,EAHP,SAKG7B,EAAY2C,KAAI,SAACC,GAAD,OACf,mBACEV,UAAU,gEADZ,SAIGU,EAAEC,KAAKC,SAFHF,EAAEG,YEpCJ,SAASC,EAAT,GAAiD,IAA1BC,EAAyB,EAAzBA,KAAMC,EAAmB,EAAnBA,IAAKC,EAAc,EAAdA,WAEzCC,GADctD,ICDP,WACb,MAAwCC,mBAAS,IAAjD,mBAAOqD,EAAP,KAAqBC,EAArB,KAQA,OAPAnD,qBAAU,WACRoD,MAAM,qBACHC,MAAK,SAACC,GAAD,OAAOA,EAAEC,UACdF,MAAK,SAACC,GACLH,EAAgBG,QAEnB,IACIJ,EDPcM,IACfC,EAAI,6EAIMT,EAJN,yEAOME,EAPN,oFAYEH,EAZF,8DAgBEE,EAhBF,yCAoBV,OAAIC,EAEA,sBAAKlB,UAAU,8BAAf,UACE,wBAAQA,UAAU,uBAAuB0B,OAAQD,IACjD,cAACnD,EAAD,OAKF,qBAAK0B,UAAU,yDAAf,wB,qBElCS,SAAS2B,EAAT,GAAqC,IAAbC,EAAY,EAAZA,SACrC,OACE,qBAAK5B,UAAU,wBAAf,SACE,cAAC,IAAD,UAAgB4B,M,mDCGP,SAASC,EAAT,GAIX,IAAD,IAHDC,qBAGC,MAHe,GAGf,EAFDC,EAEC,EAFDA,SACGC,EACF,iBACD,EAA0BnE,mBAASiE,GAAnC,mBAAO3C,EAAP,KAAc8C,EAAd,KAEAjE,qBAAU,WACRiE,EAASH,KACR,CAACA,IAEJ,IAAMI,EAAuBC,sBPnBxB,SAAkBC,EAAMC,EAAMC,GACnC,IAAIC,EACJ,OAAO,WACL,IAAIC,EAAUC,KACZtE,EAAOuE,UACLC,EAAQ,WACVJ,EAAU,KACLD,GAAWF,EAAKQ,MAAMJ,EAASrE,IAElC0E,EAAUP,IAAcC,EAC5BO,aAAaP,GACbA,EAAUQ,WAAWJ,EAAON,GACxBQ,GAAST,EAAKQ,MAAMJ,EAASrE,IOQjC6E,EAAS,SAAC7D,GACJ4C,GACFA,EAAS5C,KAEV,KACH,IASF,OACE,sCACEa,UAAU,oBACV+B,SATJ,SAAiBkB,GACf,IAAMC,EAAMD,EAAME,OAAOhE,MACzB+C,EAAqBgB,GACrBjB,EAASiB,IAOP/D,MAAOA,GACH6C,ICrCK,SAASoB,EAAT,GAOX,IANFrC,EAMC,EANDA,KACAC,EAKC,EALDA,IACAC,EAIC,EAJDA,WACAoC,EAGC,EAHDA,aACAC,EAEC,EAFDA,YACAC,EACC,EADDA,mBAEA,OACE,sBAAKvD,UAAU,uBAAf,UACE,qBAAKA,UAAU,aAAf,SACE,cAAC6B,EAAD,CACEC,cAAef,EACff,UAAU,oBACVwD,YAAY,OACZzB,SAAUsB,MAGd,qBAAKrD,UAAU,aAAf,SACE,cAAC6B,EAAD,CACEC,cAAed,EACfhB,UAAU,oBACVwD,YAAY,MACZzB,SAAUuB,MAGd,qBAAKtD,UAAU,aAAf,SACE,cAAC6B,EAAD,CACEC,cAAeb,EACfjB,UAAU,oBACVwD,YAAY,aACZzB,SAAUwB,SCzBL,SAASE,EAAT,GAA0C,IAAD,IAAtBlG,sBAAsB,MAAL,EAAK,EACtD,EAAsCM,mBAAS,CAC7CkD,KAAM,GACNC,IAAK,GACLC,WAAY,KAHd,mBAAOyC,EAAP,KAAoBC,EAApB,KAMMC,ECZO,SACbrG,EACAsG,EACAC,EACAC,GAEA,MAA4ClG,mBAAS,MAArD,mBAAO+F,EAAP,KAAuBI,EAAvB,KA6BA,OA3BAhG,qBAAU,WACR,IAAMiG,EAAY7C,MAAM,eAAD,OAAgB7D,EAAhB,iBAA8C8D,MACnE,SAACC,GAAD,OAAOA,EAAEC,UAEL2C,EAAc9C,MAAM,eAAD,OACR7D,EADQ,mBAEvB8D,MAAK,SAACC,GAAD,OAAOA,EAAEC,UACV4C,EAAa/C,MAAM,eAAD,OAAgB7D,EAAhB,kBAA+C8D,MACrE,SAACC,GAAD,OAAOA,EAAEC,UAEL6C,EAAYhD,MAAM,eAAD,OAAgB7D,EAAhB,iBAA8C8D,MACnE,SAACC,GAAD,OAAOA,EAAEC,UAGX8C,QAAQC,IAAI,CAACL,EAAWC,EAAaC,EAAYC,IAAY/C,MAC3D,YAAkC,IAAD,mBAA/BkD,EAA+B,KAA3BxD,EAA2B,KAArBC,EAAqB,KAAhBC,EAAgB,KAC/B+C,EAAkB,CAChBzG,iBACAgH,KACAxD,OACAC,MACAC,oBAIL,CAAC1D,IAEGqG,EDvBgBY,CAAYjH,GAwBnC,SAASkH,EAAUC,ITXd,SAA0BnH,EAAgBqG,GAC3CA,EACFlF,aAAaY,QACXhC,EAASC,GACTqB,KAAKW,UAAUqE,IAGjBlF,aAAaY,QAAQhC,EAASC,GAAiB,ISK/CoH,CAAiBpH,EAAgBmH,GAGnC,OA1BA1G,qBAAU,WACR,IAAM4G,ETEH,SAA0BrH,GAC/B,IAAMsH,EAAYnG,aAAaC,QAAQrB,EAASC,IAChD,OAAIsH,EACKjG,KAAKC,MAAMgG,GAEb,KSPiBC,CAAiBvH,GACnCqH,EAEFjB,EAAe,CACb5C,KAAM6D,EAAc7D,KACpBC,IAAK4D,EAAc5D,IACnBC,WAAY2D,EAAc3D,cAEL,OAAd2C,QAAc,IAAdA,OAAA,EAAAA,EAAgBrG,kBAAmBA,GAE5CoG,EAAe,CACb5C,KAAM6C,EAAe7C,KACrBC,IAAK4C,EAAe5C,IACpBC,WAAY2C,EAAe3C,eAG9B,CAAC1D,EAAgBqG,IAUlB,sBAAK5D,UAAU,oCAAf,UACE,qBAAKA,UAAU,uBAAf,SACE,cAAC2B,EAAD,CAAcC,SAAQ,OAAEgC,QAAF,IAAEA,OAAF,EAAEA,EAAgBW,OAE1C,qBAAKvE,UAAU,uBAAf,SACE,cAACoD,EAAD,CACErC,KAAM2C,EAAY3C,KAClBsC,aAAc,SAAClE,GACbwE,GAAe,SAACoB,GACd,IAAMC,EAAWC,OAAOC,OAAO,GAAIH,EAAK,CAAEhE,KAAM5B,IAEhD,OADAsF,EAAUO,GACHA,MAGXhE,IAAK0C,EAAY1C,IACjBsC,YAAa,SAACnE,GACZwE,GAAe,SAACoB,GACd,IAAMC,EAAWC,OAAOC,OAAO,GAAIH,EAAK,CAAE/D,IAAK7B,IAE/C,OADAsF,EAAUO,GACHA,MAGX/D,WAAYyC,EAAYzC,WACxBsC,mBAAoB,SAACpE,GACnBwE,GAAe,SAACoB,GACd,IAAMC,EAAWC,OAAOC,OAAO,GAAIH,EAAK,CAAE9D,WAAY9B,IAEtD,OADAsF,EAAUO,GACHA,UAKf,qBAAKhF,UAAU,qBAAf,SACE,cAACc,EAAD,CACEC,KAAM2C,EAAY3C,KAClBE,WAAYyC,EAAYzC,WACxBD,IAAK0C,EAAY1C,WEhFZ,SAASmE,IACtB,OACE,qBAAKnF,UAAU,+BAA+BoF,MAAM,mDAApD,uBCAW,SAASC,EAAT,GAA+B,IAAbC,EAAY,EAAZA,SAC/B,OACE,sBAAKtF,UAAU,wDAAf,UACE,cAACmF,EAAD,IACA,qBAAKnF,UAAU,SAAf,SAAyBsF,O,qBCFhB,SAASC,IACtB,IAAMC,EAAS,CACbC,SAAU,uBACVC,aAAc,2CACdC,KAAM,qBACNC,MAAO,WACPC,MAAO,CAAC,WAAY,UACpBhF,GAAI5C,OAAO6H,SAASC,KACpBC,qBAAqB,GAGjBxF,EAAMZ,mBAOZ,OALA5B,qBAAU,WACO,IAAIiI,IAAOT,GACnBU,OAAO,sBACb,IAEI,qBAAKrF,GAAG,mBAAmBL,IAAKA,ICyC1B2F,MArDf,WACE,IAAMC,ECTO,WACb,MAAwCvI,mBAAS,IAAjD,mBAAOuI,EAAP,KAAqBC,EAArB,KAQA,OAPArI,qBAAU,WACRoD,MAAM,mBACHC,MAAK,SAACC,GAAD,OAAOA,EAAEgF,UACdjF,MAAK,SAACV,GACL0F,EAAgB1F,EAAK4F,WAExB,IACIH,EDAcI,GACfjJ,EETO,WACb,MAA4CM,mBAC1CL,EAA0BS,OAAO6H,SAASrI,OAD5C,mBAAOF,EAAP,KAAuBkJ,EAAvB,KAkBA,OAfAzI,qBAAU,WACR,SAAS0I,IACP,IAAMjJ,EAAOQ,OAAO6H,SAASrI,KACvBkJ,EAAMnJ,EAA0BC,GACjCA,IACHQ,OAAO6H,SAASrI,KAAO,MAEzBgJ,EAAkBE,GAIpB,OAFA1I,OAAO2I,iBAAiB,aAAcF,GACtCA,IACO,WACLzI,OAAO4I,oBAAoB,aAAcH,MAE1C,IACInJ,EFVgBuJ,GACvB,EAAgCjJ,mBAASN,GAAzC,mBAAOwJ,EAAP,KAAiBC,EAAjB,KACA,EAAsCnJ,oBAAS,GAA/C,mBAAOoJ,EAAP,KAAoBC,EAApB,KAWA,OAJAlJ,qBAAU,WACRkJ,GAAe,KACd,CAAC3J,IAGF,sBAAKyC,UAAU,kCAAf,UACE,eAACqF,EAAD,WACE,sBAAMrF,UAAU,yBAAhB,4CACA,wBAAQb,MAAO4H,EAAUhF,SAb/B,SAA2BkB,GACzBhF,OAAO6H,SAASC,KAAhB,WAA2B9C,EAAME,OAAOhE,OACxC6H,EAAY/D,EAAME,OAAOhE,QAWrB,SACGiH,EAAa3F,KAAI,SAAC0G,GAAD,OAChB,wBAAQhI,MAAOgI,EAAE5J,eAAjB,mBACM4J,EAAE5J,eADR,aAC2B4J,EAAE/B,cAIjC,wBACElF,QAAS,WACPgH,GAAe,IAEjBlH,UAAU,8BAJZ,yCASF,cAACyD,EAAD,CAASlG,eAAgBA,IACxB0J,EACC,qBACEjH,UAAU,2DACVE,QAAS,SAACkH,GACRF,GAAe,GACfE,EAAEC,mBAJN,SAOE,qBAAKrH,UAAU,kDAAf,SACE,cAACuF,EAAD,QAGF,SG9CK+B,EAZS,SAAAC,GAClBA,GAAeA,aAAuBlI,UACxC,8BAAqBgC,MAAK,YAAkD,IAA/CmG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOD,GACPE,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAQL,OCDdM,IAAS3B,OACP,cAAC,IAAM4B,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BV,K","file":"static/js/main.6ecf94dd.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.6ce24c58.svg\";","export function debounce(func, wait, immediate) {\n  let timeout;\n  return function () {\n    let context = this,\n      args = arguments;\n    let later = function () {\n      timeout = null;\n      if (!immediate) func.apply(context, args);\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) func.apply(context, args);\n  };\n}\n\nfunction cacheKey(questionNumber) {\n  return `question_cache_${questionNumber}`;\n}\n\nexport function getQuestionCache(questionNumber) {\n  const objString = localStorage.getItem(cacheKey(questionNumber));\n  if (objString) {\n    return JSON.parse(objString);\n  }\n  return null;\n}\n\nexport function setQuestionCache(questionNumber, questionObject) {\n  if (questionObject) {\n    localStorage.setItem(\n      cacheKey(questionNumber),\n      JSON.stringify(questionObject)\n    );\n  } else {\n    localStorage.setItem(cacheKey(questionNumber), \"\");\n  }\n}\n\nexport function getQuestionNumberFromHash(hash) {\n  if (hash.match(/^#[0-9]+$/)) {\n    return +hash.slice(1);\n  } else {\n    return 1;\n  }\n}\n","import { useEffect } from \"react\";\nimport { useState } from \"react\";\n\nexport default function useIframeMessage() {\n  const [messageList, setMessageList] = useState([]);\n\n  useEffect(() => {\n    window.sendMessage = (args) => {\n      setMessageList((messageList) => messageList.concat([args]));\n    };\n    return () => {\n      window.sendMessage = undefined;\n    };\n  }, []);\n\n  return messageList;\n}\n","import { faAngleDown, faAngleUp } from \"@fortawesome/free-solid-svg-icons\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { useEffect, useRef } from \"react\";\nimport useIframeMessage from \"../hooks/useIframeMessage\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\n\nexport default function VirtualConsole() {\n  const [isOpen, setIsOpen] = useLocalStorage(\"is-virtual-console-open\", false);\n  const messageList = useIframeMessage();\n  const scrollRef = useRef();\n\n  useEffect(() => {\n    if (scrollRef.current) {\n      scrollRef.current.scrollTop = scrollRef.current.scrollHeight;\n    }\n  }, [messageList]);\n\n  return (\n    <div className=\"w-full bg-green-100 flex flex-col\">\n      <div className=\"w-full h-8 bg-gray-400 shadow-sm flex justify-center items-center relative\">\n        <div className=\"text-green-50\">Console ({messageList.length})</div>\n        <div\n          className=\"absolute right-2 hover: cursor-pointer text-green-50\"\n          onClick={() => {\n            setIsOpen((o) => !o);\n          }}\n        >\n          <FontAwesomeIcon\n            icon={isOpen ? faAngleDown : faAngleUp}\n          ></FontAwesomeIcon>\n        </div>\n      </div>\n      <div\n        className=\"w-full h-40 p-1 overflow-scroll\"\n        hidden={!isOpen}\n        ref={scrollRef}\n      >\n        {messageList.map((m) => (\n          <p\n            className=\"font-sans text-green-900 border-b border-gray-50 border-solid\"\n            key={m.id}\n          >\n            {m.data.content}\n          </p>\n        ))}\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\n\n// Hook\nexport default function useLocalStorage(key, initialValue) {\n  // State to store our value\n  // Pass initial state function to useState so logic is only executed once\n  const [storedValue, setStoredValue] = useState(() => {\n    try {\n      // Get from local storage by key\n      const item = window.localStorage.getItem(key);\n      // Parse stored json or if none return initialValue\n      return item ? JSON.parse(item) : initialValue;\n    } catch (error) {\n      // If error also return initialValue\n      console.log(error);\n      return initialValue;\n    }\n  });\n  // Return a wrapped version of useState's setter function that ...\n  // ... persists the new value to localStorage.\n  const setValue = (value) => {\n    try {\n      // Allow value to be a function so we have same API as useState\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value;\n      // Save state\n      setStoredValue(valueToStore);\n      // Save to local storage\n      window.localStorage.setItem(key, JSON.stringify(valueToStore));\n    } catch (error) {\n      // A more advanced implementation would handle the error case\n      console.log(error);\n    }\n  };\n  return [storedValue, setValue];\n}\n","import useIframeInject from \"../hooks/useIframeInject\";\nimport useIframeMessage from \"../hooks/useIframeMessage\";\nimport VirtualConsole from \"./VirtualConsole\";\n\nexport default function BrowserArea({ html, css, javascript }) {\n  const messageList = useIframeMessage();\n  const injectString = useIframeInject();\n  const tmpl = `\n    <html>\n        <head>\n            <style>\n                ${css}\n            </style>\n            <script>\n                ${injectString}\n            </script>\n        </head>\n\n        <body>\n            ${html}\n        </body>\n\n        <script>\n            ${javascript}\n        </script>\n    </html>\n  `;\n  if (injectString) {\n    return (\n      <div className=\"w-full h-full flex flex-col\">\n        <iframe className=\"w-full h-full flex-1\" srcDoc={tmpl}></iframe>\n        <VirtualConsole></VirtualConsole>\n      </div>\n    );\n  } else {\n    return (\n      <div className=\"w-full h-full flex justify-center justify-items-center\">\n        loading...\n      </div>\n    );\n  }\n}\n","import { useState } from \"react\";\nimport { useCallback } from \"react\";\nimport { useEffect } from \"react\";\n\nexport default function useIframeInject() {\n  const [injectString, setInjectString] = useState(\"\");\n  useEffect(() => {\n    fetch(\"/iframe_inject.js\")\n      .then((r) => r.text())\n      .then((r) => {\n        setInjectString(r);\n      });\n  }, []);\n  return injectString;\n}\n","import ReactMarkdown from \"react-markdown\";\n\nexport default function DocumentArea({ markdown }) {\n  return (\n    <div className=\"p-2 overflow-y-scroll\">\n      <ReactMarkdown>{markdown}</ReactMarkdown>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { useCallback } from \"react\";\nimport { useEffect } from \"react\";\nimport { debounce } from \"../utils\";\n\n/**\n * onChange事件是debounce过的\n */\nexport default function MyTextArea({\n  forcedContent = \"\",\n  onChange,\n  ...otherProps\n}) {\n  const [value, setValue] = useState(forcedContent);\n\n  useEffect(() => {\n    setValue(forcedContent);\n  }, [forcedContent]);\n\n  const debouncedEventFiring = useCallback(\n    debounce((value) => {\n      if (onChange) {\n        onChange(value);\n      }\n    }, 1000),\n    []\n  );\n\n  function _change(event) {\n    const val = event.target.value;\n    debouncedEventFiring(val);\n    setValue(val);\n  }\n\n  return (\n    <textarea\n      className=\"h-full w-full p-1\"\n      onChange={_change}\n      value={value}\n      {...otherProps}\n    ></textarea>\n  );\n}\n","import MyTextArea from \"./MyTextArea\";\n\nexport default function EditorArea({\n  html,\n  css,\n  javascript,\n  onHtmlChange,\n  onCssChange,\n  onJavascriptChange,\n}) {\n  return (\n    <div className=\"flex flex-col h-full\">\n      <div className=\"flex-1 p-2\">\n        <MyTextArea\n          forcedContent={html}\n          className=\"h-full w-full p-1\"\n          placeholder=\"html\"\n          onChange={onHtmlChange}\n        ></MyTextArea>\n      </div>\n      <div className=\"flex-1 p-2\">\n        <MyTextArea\n          forcedContent={css}\n          className=\"h-full w-full p-1\"\n          placeholder=\"css\"\n          onChange={onCssChange}\n        ></MyTextArea>\n      </div>\n      <div className=\"flex-1 p-2\">\n        <MyTextArea\n          forcedContent={javascript}\n          className=\"h-full w-full p-1\"\n          placeholder=\"javascript\"\n          onChange={onJavascriptChange}\n        ></MyTextArea>\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport useQuestion from \"../hooks/useQuestion\";\nimport { getQuestionCache, setQuestionCache } from \"../utils\";\nimport BrowserArea from \"./BrowserArea\";\nimport DocumentArea from \"./DocumentArea\";\nimport EditorArea from \"./EditorArea\";\n\nexport default function Sandbox({ questionNumber = 1 }) {\n  const [editorState, setEditorState] = useState({\n    html: \"\",\n    css: \"\",\n    javascript: \"\",\n  });\n\n  const questionObject = useQuestion(questionNumber);\n\n  useEffect(() => {\n    const questionCache = getQuestionCache(questionNumber);\n    if (questionCache) {\n      // 存在结题数据本地缓存\n      setEditorState({\n        html: questionCache.html,\n        css: questionCache.css,\n        javascript: questionCache.javascript,\n      });\n    } else if (questionObject?.questionNumber === questionNumber) {\n      // 没缓存，就显示接口里的原题数据\n      setEditorState({\n        html: questionObject.html,\n        css: questionObject.css,\n        javascript: questionObject.javascript,\n      });\n    }\n  }, [questionNumber, questionObject]);\n\n  /**\n   * 将当前编辑框内容存入localStorage\n   */\n  function saveDraft(state) {\n    setQuestionCache(questionNumber, state);\n  }\n\n  return (\n    <div className=\"flex justify-items-stretch h-full\">\n      <div className=\"flex-1 bg-indigo-200\">\n        <DocumentArea markdown={questionObject?.md}></DocumentArea>\n      </div>\n      <div className=\"flex-1 bg-purple-100\">\n        <EditorArea\n          html={editorState.html}\n          onHtmlChange={(value) => {\n            setEditorState((old) => {\n              const newState = Object.assign({}, old, { html: value });\n              saveDraft(newState);\n              return newState;\n            });\n          }}\n          css={editorState.css}\n          onCssChange={(value) => {\n            setEditorState((old) => {\n              const newState = Object.assign({}, old, { css: value });\n              saveDraft(newState);\n              return newState;\n            });\n          }}\n          javascript={editorState.javascript}\n          onJavascriptChange={(value) => {\n            setEditorState((old) => {\n              const newState = Object.assign({}, old, { javascript: value });\n              saveDraft(newState);\n              return newState;\n            });\n          }}\n        ></EditorArea>\n      </div>\n      <div className=\"flex-1 bg-pink-100\">\n        <BrowserArea\n          html={editorState.html}\n          javascript={editorState.javascript}\n          css={editorState.css}\n        ></BrowserArea>\n      </div>\n    </div>\n  );\n}\n","import { useState } from \"react\";\nimport { useEffect } from \"react\";\n\nexport default function useQuestion(\n  questionNumber /* 题号 */,\n  setHtml,\n  setCss,\n  setJavascript\n) {\n  const [questionObject, setQuestionObject] = useState(null);\n\n  useEffect(() => {\n    const mdPromise = fetch(`/questions/q${questionNumber}/question.md`).then(\n      (r) => r.text()\n    );\n    const htmlPromise = fetch(\n      `/questions/q${questionNumber}/question.html`\n    ).then((r) => r.text());\n    const cssPromise = fetch(`/questions/q${questionNumber}/question.css`).then(\n      (r) => r.text()\n    );\n    const jsPromise = fetch(`/questions/q${questionNumber}/question.js`).then(\n      (r) => r.text()\n    );\n\n    Promise.all([mdPromise, htmlPromise, cssPromise, jsPromise]).then(\n      ([md, html, css, javascript]) => {\n        setQuestionObject({\n          questionNumber,\n          md,\n          html,\n          css,\n          javascript,\n        });\n      }\n    );\n  }, [questionNumber]);\n\n  return questionObject;\n}\n","export default function Logo() {\n  return (\n    <div className=\"font-bold font-sans p-1 pl-4\" title=\"前端面试题练习场\">\n      JeesCode!\n    </div>\n  );\n}\n","import Logo from \"./Logo\";\n\nexport default function Banner({ children }) {\n  return (\n    <div className=\"flex h-10 w-screen items-center shadow-md bg-gray-100\">\n      <Logo></Logo>\n      <div className=\"flex-1\">{children}</div>\n    </div>\n  );\n}\n","import { useEffect } from \"react\";\nimport { useRef } from \"react\";\nimport Gitalk from \"gitalk\";\n\nexport default function Comment() {\n  const config = {\n    clientID: \"5cd53a83725fc77fea88\",\n    clientSecret: \"fb93d69b954f7c5b287781f36f59154879ec4033\",\n    repo: \"jeescode.github.io\",\n    owner: \"jeescode\",\n    admin: [\"jeescode\", \"mmjang\"],\n    id: window.location.href,\n    distractionFreeMode: false,\n  };\n\n  const ref = useRef();\n\n  useEffect(() => {\n    const gitalk = new Gitalk(config);\n    gitalk.render(\"gitalk-container\");\n  }, []);\n\n  return <div id=\"gitalk-container\" ref={ref}></div>;\n}\n","import logo from \"./logo.svg\";\nimport \"./App.css\";\nimport \"gitalk/dist/gitalk.css\";\nimport Sandbox from \"./components/Sandbox\";\nimport Banner from \"./components/Banner\";\nimport Comment from \"./components/Comment\";\nimport useQuestionList from \"./hooks/useQuestionList\";\nimport { useEffect, useState } from \"react\";\nimport useQuestionNumber from \"./hooks/useQuestionNumber\";\n\nfunction App() {\n  const questionList = useQuestionList();\n  const questionNumber = useQuestionNumber();\n  const [selected, setSelected] = useState(questionNumber);\n  const [showComment, setShowComment] = useState(false);\n\n  function onSelectionChange(event) {\n    window.location.href = `#${event.target.value}`;\n    setSelected(event.target.value);\n  }\n\n  useEffect(() => {\n    setShowComment(false);\n  }, [questionNumber]);\n\n  return (\n    <div className=\"w-screen h-screen flex flex-col\">\n      <Banner>\n        <span className=\"pl-4 p-1 text-blue-700\">题目列表：</span>\n        <select value={selected} onChange={onSelectionChange}>\n          {questionList.map((q) => (\n            <option value={q.questionNumber}>\n              {`${q.questionNumber}. ${q.title}`}\n            </option>\n          ))}\n        </select>\n        <button\n          onClick={() => {\n            setShowComment(true);\n          }}\n          className=\"shadow-md ml-4 bg-white p-1\"\n        >\n          查看评论\n        </button>\n      </Banner>\n      <Sandbox questionNumber={questionNumber}></Sandbox>\n      {showComment ? (\n        <div\n          className=\"fixed w-screen h-screen flex items-center justify-center\"\n          onClick={(e) => {\n            setShowComment(false);\n            e.stopPropagation();\n          }}\n        >\n          <div className=\"w-3/6 h-5/6 bg-gray-50 rounded-xl shadow-md p-2\">\n            <Comment></Comment>\n          </div>\n        </div>\n      ) : null}\n    </div>\n  );\n}\n\nexport default App;\n","import { useEffect, useState } from \"react\";\n\nexport default function useQuestionList() {\n  const [questionList, setQuestionList] = useState([]);\n  useEffect(() => {\n    fetch(\"/questions.json\")\n      .then((r) => r.json())\n      .then((data) => {\n        setQuestionList(data.list);\n      });\n  }, []);\n  return questionList;\n}\n","import { useEffect, useState } from \"react\";\nimport { getQuestionNumberFromHash } from \"../utils\";\n\nexport default function useQuestionNumber() {\n  const [questionNumber, setQuestionNumber] = useState(\n    getQuestionNumberFromHash(window.location.hash)\n  );\n  useEffect(() => {\n    function onHashChange() {\n      const hash = window.location.hash;\n      const num = getQuestionNumberFromHash(hash);\n      if (!hash) {\n        window.location.hash = \"#1\";\n      }\n      setQuestionNumber(num);\n    }\n    window.addEventListener(\"hashchange\", onHashChange);\n    onHashChange();\n    return () => {\n      window.removeEventListener(\"hashchange\", onHashChange);\n    };\n  }, []);\n  return questionNumber;\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}